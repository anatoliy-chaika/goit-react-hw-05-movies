{"version":3,"file":"static/js/44.59e88fff.chunk.js","mappings":"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","sources":["components/gallery/MovieGallery.styled.js","components/gallery/MovieGallery.js","components/search/SearchBar.styled.js","components/search/SearchBar.js","pages/movies/Movies.styled.js","pages/movies/Movies.js","servises/getFilms.js"],"sourcesContent":["import styled from '@emotion/styled';\n\nexport const MovieGalleryStyled = styled.ul`\n  display: grid;\n  max-width: calc(100vw - 48px);\n  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\n  grid-gap: 16px;\n  margin-top: 0;\n  margin-bottom: 0;\n  padding: 0;\n  list-style: none;\n  margin-left: auto;\n  margin-right: auto;\n`;\n\nexport const MovieLi = styled.li`\n  border: 1px solid #7d99a9;\n  border-radius: 5px;\n  padding: 10px;\n  background-color: #f7feff;\n`;\n\nexport const TitleMain = styled.p`\n  font-size: 25px;\n  font-weight: 500;\n  text-align: center;\n  color: #0d1b23;\n`;\n\nexport const MoviePoster = styled.img`\n  margin: 0 auto;\n`;\n","import { Link, useLocation } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport {\n  MovieGalleryStyled,\n  MovieLi,\n  MoviePoster,\n  TitleMain,\n} from './MovieGallery.styled';\n\nconst MovieGallery = ({ array }) => {\n  const location = useLocation();\n  return (\n    <MovieGalleryStyled>\n      {array.map(item => {\n        return (\n          <MovieLi key={item.id}>\n            <Link to={`/movies/${item.id}`} state={{ from: location }}>\n              <MoviePoster\n                src={`https://image.tmdb.org/t/p/w300${item.poster_path}`}\n                alt={item.original_title}\n              />\n              <TitleMain>{item.original_title}</TitleMain>\n            </Link>\n          </MovieLi>\n        );\n      })}\n    </MovieGalleryStyled>\n  );\n};\n\nexport default MovieGallery;\nMovieGallery.propTypes = { array: PropTypes.array };\n","import styled from '@emotion/styled';\n\nexport const Form = styled.form`\n  top: 50px;\n  left: 0px;\n  position: sticky;\n  z-index: 1100;\n  text-align: center;\n`;\n\nexport const Input = styled.input`\n  background-color: white;\n  border-radius: 5px;\n  margin-right: 5px;\n  min-width: 500px;\n`;\n\nexport const ButtonStyled = styled.button`\n  border-radius: 5px;\n  border: none;\n  cursor: pointer;\n`;\n","import { BsSearch } from 'react-icons/bs';\nimport PropTypes from 'prop-types';\nimport { ButtonStyled, Form, Input } from './SearchBar.styled';\n\nconst SearchBar = ({ onSubmit }) => {\n  const handleSubmit = e => {\n    e.preventDefault();\n    const form = e.currentTarget;\n    onSubmit(form.elements.query.value);\n    form.reset();\n  };\n\n  return (\n    <Form onSubmit={handleSubmit} autoComplete=\"off\">\n      <Input type=\"text\" name=\"query\" />\n      <ButtonStyled type=\"submit\">\n        <BsSearch />\n      </ButtonStyled>\n    </Form>\n  );\n};\n\nexport default SearchBar;\n\nSearchBar.propTypes = {\n  handleSubmit: PropTypes.func,\n};\n","import styled from '@emotion/styled';\n\nexport const ButtonMore = styled.button`\n  display: block;\n  padding: 10px;\n  background-color: #bedadb;\n  margin-bottom: 10px;\n  border-radius: 5px;\n  cursor: pointer;\n  margin: 30px auto;\n\n  &:hover,\n  :focus {\n    color: white;\n    background-color: orangered;\n  }\n`;\n","import { useSearchParams } from 'react-router-dom';\nimport { useState, useEffect, useMemo } from 'react';\nimport { getMovieForName } from 'servises/getFilms';\nimport SearchBar from 'components/search/SearchBar';\nimport MovieGallery from 'components/gallery/MovieGallery';\nimport { ButtonMore } from './Movies.styled';\n\nconst Movies = () => {\n  const [movies, setMovies] = useState([]);\n  const [total, setTotal] = useState(null);\n  const [searchParams, setSearchParams] = useSearchParams();\n  const params = useMemo(\n    () => Object.fromEntries([...searchParams]),\n    [searchParams]\n  );\n  const { query, page } = params;\n  const number = Number(page);\n\n  // useEffect(() => {\n  //   document.addEventListener('scroll', scrollHandler);\n\n  //   return function () {\n  //     document.removeEventListener('scroll', scrollHandler);\n  //   };\n  // }, []);\n\n  // const scrollHandler = e => {\n  //   if (\n  //     e.target.documentElement.scrollHeight -\n  //       (e.target.documentElement.scrollTop + window.innerHeight) <\n  //     100\n  //   ) {\n  //     console.log('scroll');\n  //     setSearchParams({ ...params, page: number + 1 });\n  //   }\n  // };\n\n  useEffect(() => {\n    if (!query) {\n      setMovies([]);\n      return;\n    }\n    const fetchMovies = async () => {\n      try {\n        const { results, total_results } = await getMovieForName(query, number);\n        setMovies(prev => [...prev, ...results]);\n        setTotal(total_results);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    fetchMovies();\n  }, [number, query]);\n\n  const handleSubmit = newQuery => {\n    if (newQuery.trim() === '') {\n      return;\n    }\n    const trueQuery = newQuery !== '' ? { query: newQuery, page: 1 } : {};\n    setSearchParams(trueQuery);\n    setMovies([]);\n  };\n\n  const handlePage = () => {\n    setSearchParams({ ...params, page: number + 1 });\n  };\n\n  return (\n    <>\n      <SearchBar onSubmit={handleSubmit} />\n      {movies.length > 0 && (\n        <>\n          <ul>\n            <MovieGallery array={movies} />\n          </ul>\n          {total !== movies.length && (\n            <ButtonMore onClick={handlePage}> Load More</ButtonMore>\n          )}\n        </>\n      )}\n    </>\n  );\n};\nexport default Movies;\n","import axios from 'axios';\n\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst API_KEY = '7365af2a22cee957c4f845cc26521213';\n\nexport const getMovies = async () => {\n  const response = await axios.get(\n    `${BASE_URL}/trending/movie/day?api_key=${API_KEY}`\n  );\n\n  return response.data;\n};\n\nexport const getIdInfo = async id => {\n  const response = await axios.get(\n    `${BASE_URL}/movie/${id}?api_key=${API_KEY}`\n  );\n  return response.data;\n};\n\nexport const getActors = async id => {\n  const response = await axios.get(\n    `${BASE_URL}/movie/${id}/credits?api_key=${API_KEY}`\n  );\n  return response.data;\n};\n\nexport const getReviews = async id => {\n  const response = await axios.get(\n    `${BASE_URL}/movie/${id}/reviews?api_key=${API_KEY}`\n  );\n\n  return response.data;\n};\n\nexport const getMovieForName = async (name, page = 1) => {\n  const response = await axios.get(\n    `${BASE_URL}/search/movie?api_key=${API_KEY}&query=${name}&page=${page}&include_adult=false`\n  );\n  return response.data;\n};\n"],"names":["MovieGalleryStyled","styled","MovieLi","TitleMain","MoviePoster","array","location","useLocation","map","item","to","id","state","from","src","poster_path","alt","original_title","Form","Input","ButtonStyled","onSubmit","e","preventDefault","form","currentTarget","elements","query","value","reset","autoComplete","type","name","ButtonMore","useState","movies","setMovies","total","setTotal","useSearchParams","searchParams","setSearchParams","params","useMemo","Object","fromEntries","page","number","Number","useEffect","fetchMovies","getMovieForName","results","total_results","prev","console","log","newQuery","trim","length","MovieGallery","onClick","BASE_URL","API_KEY","getMovies","axios","response","data","getIdInfo","getActors","getReviews"],"sourceRoot":""}